<!DOCTYPE html>
<html lang="en">

<head>

<link rel="apple-touch-icon" sizes="60x60" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="57x57" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="72x72" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="76x76" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="114x114" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="120x120" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="144x144" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="152x152" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="shortcut icon" href="{{url_for('static', filename='img/logo.png') }}" type="image/x-icon">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App - Calendar Day</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/semantic.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/semantic.min.js"></script>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.rawgit.com/mdehoog/Semantic-UI/6e6d051d47b598ebab05857545f242caf2b4b48c/dist/semantic.min.css" rel="stylesheet" type="text/css" />
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
    <script src="https://cdn.rawgit.com/mdehoog/Semantic-UI/6e6d051d47b598ebab05857545f242caf2b4b48c/dist/semantic.min.js"></script>
</head>

<body>  
    <a class="ui huge circular icon button" href="/calendar"> <i class="calendar icon"></i></a>
    <style>
    .myButton {
        display:block;
        float:left;
    }
    </style> 

<div style="margin-top: 10px;" class="ui container">
        <h1 class="ui center aligned header" id="date"></h1>
        <script>
            var getDate = localStorage.getItem("date")
            document.getElementById("date").innerHTML = getDate;
            //console.log(getDate)
        </script>

        <form class="ui form" action="" method="post">
            <div class="field">
            <style>
                .left {
                position: absolute;
                top: 10; right: 100px; left:0px; 
                
                }
                .right {
                    float: right
                    
                }
                .input-group {
                    display: table;
                position: relative;
                z-index: 2;
                float: left;
                width: 100%;
                margin-bottom: 0;
                

                    vertical-align: middle;
                }

                .input-group-btn{
                display: table-cell;
                    width: 1%;
                white-space: nowrap;
                vertical-align: middle;
                }
                
                .form-control{
                    display: table-cell;
                    width: 100%;
                    
                }

                .button3 {
                background: grey;
                animation-name: none;
                animation-duration: 999s;
                animation-iteration-count: infinite;
                }
                @keyframes flash {
                0% {
                    background: grey;
                }
                0% {
                    background: grey;
                }
            }

            .button4 {
                background: grey;
                animation-name: none;
                animation-duration: 999s;
                animation-iteration-count: infinite;
                }
                @keyframes flash {
                0% {
                    background: grey;
                }
                0% {
                    background: grey;
                }
            }
            </style>
            <script>

                window.onload = () => {
                const button = document.getElementById('button3');
                button.addEventListener('click', () => {
                    if (button.style['animation-name'] === 'flash') {
                    recognition.stop();
                    button.style['animation-name'] = 'none';
                    } 
                    
                    else {
                    button.style['animation-name'] = 'flash';
                    recognition.start();
                    }
                

                });
                let p = document.createElement("p");
        
                const recognition = new webkitSpeechRecognition();
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.onresult = function (event) {
                    let result = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                    result += event.results[i][0].transcript;
                }

                    recognition.addEventListener("result", (e) => {
                    const text = Array.from(e.results)
                        .map((result) => result[0])
                        .map((result) => result.transcript)
                        .join("");

                    if (e.results[0].isFinal) {
                        p = document.createElement("p");
                        //console.log(text)
                        $("#new_name").val(text); // set the input val to the speech transcript

                    }
                });
                };

                const button2 = document.getElementById('button4');
                button2.addEventListener('click', () => {
                    if (button2.style['animation-name'] === 'flash') {
                    recognition2.stop();
                    button2.style['animation-name'] = 'none';
                    } 
                    
                    else {
                    button2.style['animation-name'] = 'flash';
                    recognition2.start();
                    }
                
                });
                let p2 = document.createElement("p");

                const recognition2 = new webkitSpeechRecognition();
                recognition2.continuous = true;
                recognition2.interimResults = true;
                recognition2.onresult = function (event) {
                    let result = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                    result += event.results[i][0].transcript;
                }

                
                    recognition2.addEventListener("result", (e) => {
                    const text = Array.from(e.results)
                        .map((result) => result[0])
                        .map((result) => result.transcript)
                        .join("");

                    if (e.results[0].isFinal) {
                        p = document.createElement("p");
                        $("#new_description").val(text); // set the input val to the speech transcript
                        //console.log(text)
                    }
                });
                };
            };
    </script>
        <label>Name</label>
            <div class="input-group">
                <input  type="text" name="new_name" autocomplete="off" placeholder="Enter Name" id="new_name" maxlength="80" required>
                <span class="input-group-btn">
                <a class="ui icon button" id="button3"> <i class="microphone icon"></i></a>
                </span>
            </div>
                <br>
                <br>
                <br>
            <div class="field">
            <label >Description</label>
            <div class="input-group">
                <input  type="text" name="new_description" autocomplete="off" placeholder="Enter Description" id="new_description" maxlength="150"required>
                <span class="input-group-btn">
                <a class="ui icon button" id="button4"> <i class="microphone icon"></i></a>
                </span>
            </div>
                <br>
                <br>
                <br>
                <div class="field">
                <label >Start Time</label>
                <div class="ui calendar" id="new_start">
                    <div class="ui input left icon">
                    <i class="time icon"></i>
                    <input  type="text" name="new_start" autocomplete="off"  placeholder="Select Time" maxlength="5" required>
                    <script>
                        $('#new_start').calendar({
                            ampm: false,
                            type: 'time',
                            onChange: function (time, text) {
                            var newValue = text;
                            },
                        });
                        </script>
                    </div>
                </div>
            </form>
                <br>
                <button class="ui brown button" type="submit" >Add</button>
                <a class="ui yellow button" href="" >Clear</a>
        </form>

        <hr>
        {% for new_todo in new_todo_list %}
        <div class="ui white segment Change">
        <table class="ui definition table">
        

        </script>

        <body>
            <tr>  
            <td class="one wide column">‏‏‎‎‎ {{new_todo.new_id}}</td>
            <td><h4> {{new_todo.new_name}} </a></h4></td>
            <td class="two wide column"> <h4> ‎{{new_todo.new_start}} </h4></td>
            </tr>
        </body>
        </table>

        <div class="ui compact segment">
        <p>{{new_todo.new_description}}</p>
        </div>     
        
        <style>
        .ui.white.segment.Change:hover  { 
            background-color: rgb(252, 252, 252)!important;
            color: rgb(0, 0, 0)!important;
        }

        </style>
            {% if new_todo.new_complete == False %}
            <span class="ui gray label" >Status: Not Complete</span> 
            <script>
            complete = false
            </script>
            {% else %}
            <span  class="ui green label" >Status: Completed</span>
            <script>
            complete = true
            </script>
            {% endif %}
            <br>
            <br>
            <a class="ui linkedin button" href="/calendar/{{userInfo}}/{{daysInMonth}}/{{userMonth}}/update/{{ new_todo.new_id }}" >Update Status</a>
            <a class="ui google plus  button" href="/calendar/{{userInfo}}/{{daysInMonth}}/{{userMonth}}/delete/{{ new_todo.new_id }}"> Remove</a>
    </div>
    <div>
        {% endfor %}
    </div>

    <script src="/static/jsp/script.js"></script>
    </div>
</body>
</html>